<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Date Picker + Blocker (Minimal & Functional)</title>
  <style>
    :root{
      --bg:#ffffff;
      --accent:#c7ff81;
      --accent-2:#dfffcf;
      --panel:#fff7d6;
      --muted:#777;
      --danger:#ff6b6b;
      --shadow: 0 6px 18px rgba(10,10,10,0.08);
      --radius:12px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{
      background: #f3f5f6;
      padding: 28px;
      display:flex;
      gap:30px;
      justify-content:center;
      align-items:flex-start;
      min-height:100vh;
      color:#111;
    }

    /* Calendar box */
    .calendar {
      width:260px;
      background:var(--bg);
      border-radius:var(--radius);
      padding:18px;
      box-shadow:var(--shadow);
    }
    .calendar h3{
      margin:0 0 12px 0;
      padding:10px;
      background:var(--accent);
      border-radius:10px;
      text-align:center;
      font-weight:600;
      font-size:18px;
    }
    .date-row{
      display:flex;
      gap:8px;
      flex-direction:column;
      align-items:center;
    }
    input[type="date"]{
      width:100%;
      padding:9px 10px;
      border-radius:10px;
      border:1px solid #d6d6d6;
      font-size:15px;
    }
    .calendar .hint{
      font-size:13px;
      color:var(--muted);
      margin-top:8px;
    }
    .error {
      margin-top:8px;
      color:var(--danger);
      font-size:13px;
      font-weight:600;
    }

    /* Blocker panel */
    .blocker {
      width:420px;
      background:var(--bg);
      border-radius:var(--radius);
      padding:14px;
      box-shadow:var(--shadow);
    }

    .blocker-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:10px;
    }
    .blocker-header h2{
      margin:0;
      padding:10px 14px;
      background:var(--accent);
      border-radius:10px;
      font-size:20px;
      font-weight:700;
    }
    .close-btn{
      background:linear-gradient(#ff9b9b,#ff6b6b);
      color:white;
      border:none;
      width:34px;height:34px;
      border-radius:8px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 3px 6px rgba(0,0,0,0.12);
    }

    .blocks-list {
      margin-top:8px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .block-card {
      background:var(--panel);
      border-radius:12px;
      padding:12px;
      display:grid;
      grid-template-columns: 1fr 120px;
      gap:10px;
      align-items:start;
      position:relative;
    }
    .block-card .dates {
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
    }
    .block-card small { color:var(--muted); display:block; margin-bottom:6px;}
    .pill-date{
      background:var(--accent-2);
      padding:8px 12px;
      border-radius:18px;
      min-width:120px;
      text-align:center;
      font-weight:600;
      border:1px solid rgba(0,0,0,0.05);
    }
    .trash-btn{
      position:absolute;
      right:10px; top:10px;
      background:#fff;
      border:1px solid #eee;
      width:36px; height:36px;
      border-radius:10px;
      cursor:pointer;
      font-size:16px;
      display:flex;align-items:center;justify-content:center;
    }

    .cause {
      grid-column: 1 / -1;
      margin-top:6px;
      background:#efffe9;
      padding:10px;
      border-radius:10px;
      border:1px solid rgba(0,0,0,0.03);
      min-height:44px;
    }

    .controls{
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-top:14px;
    }
    .add-btn {
      background:var(--accent);
      border:none;
      padding:10px 14px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
    }
    .submit-block {
      background: linear-gradient(#7be06b,#47b83a);
      border:none;
      padding:10px 18px;
      border-radius:20px;
      font-weight:700;
      cursor:pointer;
      color:white;
      min-width:120px;
      text-align:center;
    }

    /* form for creating new block */
    .new-block {
      background: #fffdf0;
      border-radius:12px;
      padding:12px;
      margin-top:8px;
      border:1px solid rgba(0,0,0,0.03);
      box-shadow: 0 2px 8px rgba(0,0,0,0.02);
    }
    .new-row{
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      margin-bottom:8px;
    }
    .new-row label{ min-width:54px; color:var(--muted); font-weight:600;}
    .new-row input[type="date"]{ padding:8px 10px; border-radius:10px; border:1px solid #dcdcdc;}

    .small-note{ font-size:13px; color:var(--muted); margin-top:6px; }

    .saved-note{ font-size:13px; color:#2d7a2d; margin-left:8px; font-weight:600; }

    /* responsive */
    @media (max-width:880px){
      body{flex-direction:column; align-items:center}
      .blocker, .calendar{width:92%}
      .block-card{grid-template-columns: 1fr}
    }
  </style>
</head>
<body>

  <!-- Calendar / form side -->
  <div class="calendar" aria-labelledby="calendarTitle">
    <h3 id="calendarTitle">Select Date</h3>
    <div class="date-row">
      <input id="mainDate" type="date" />
      <div id="calendarError" class="error" style="display:none"></div>
      <div class="hint">Blocked ranges will be prevented.</div>
    </div>
    <div class="small-note" style="margin-top:10px;">
      Existing blocks: <span id="blocksCount">0</span>
      <span id="savedHint" class="saved-note" style="display:none">Saved</span>
    </div>
  </div>

  <!-- Blocker side -->
  <div class="blocker" role="region" aria-label="Date Blocker">
    <div class="blocker-header">
      <h2>Date Blocker</h2>
      <button title="Hide" class="close-btn" id="toggleBlocker">âœ•</button>
    </div>

    <!-- form to add new block -->
    <div class="new-block" id="newBlockForm">
      <div class="new-row">
        <label for="start">From</label>
        <input id="start" type="date" />
        <label style="margin-left:6px;" for="end">to</label>
        <input id="end" type="date" />
      </div>

      <div style="margin-bottom:8px">
        <label style="display:block;margin-bottom:6px;color:var(--muted)">Cause (optional)</label>
        <input id="cause" type="text" placeholder="Festival, maintenance..." style="width:100%;padding:9px;border-radius:10px;border:1px solid #e6e6e6"/>
      </div>

      <div id="formError" class="error" style="display:none"></div>

      <div class="controls">
        <button class="add-btn" id="clearForm">Clear</button>
        <button class="submit-block" id="saveBlock">SUBMIT</button>
      </div>
    </div>

    <div style="margin-top:14px">
      <small style="color:var(--muted)">Blocked ranges</small>
      <div id="blocks" class="blocks-list"></div>
    </div>
  </div>

  <script>
    // Utility helpers
    const $ = sel => document.querySelector(sel);
    const id = n => document.getElementById(n);

    function parseDateISO(s){
      if(!s) return null;
      // keep as UTC-midnight to compare by epoch
      const parts = s.split('-').map(Number);
      if(parts.length !== 3) return null;
      return new Date(Date.UTC(parts[0], parts[1]-1, parts[2]));
    }
    function isoDate(d){
      if(!d) return '';
      const yyyy = d.getUTCFullYear();
      const mm = String(d.getUTCMonth()+1).padStart(2,'0');
      const dd = String(d.getUTCDate()).padStart(2,'0');
      return `${yyyy}-${mm}-${dd}`;
    }

    // Load & save
    const STORAGE_KEY = 'blocked_date_ranges_v1';
    function loadBlocks(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if(!raw) return [];
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed)) return [];
        // ensure proper format
        return parsed.map(b => ({
          start: String(b.start || ''),
          end: String(b.end || ''),
          cause: String(b.cause || '')
        }));
      } catch(e){
        console.error('load error', e);
        return [];
      }
    }
    function saveBlocks(blocks){
      try {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(blocks));
        showSavedHint();
      } catch(e){
        alert('Unable to save (storage error).');
        console.error(e);
      }
    }

    // State
    let blocks = loadBlocks();

    // DOM refs
    const mainDate = id('mainDate');
    const calendarError = id('calendarError');
    const blocksCount = id('blocksCount');
    const blocksList = id('blocks');
    const formError = id('formError');

    function renderBlocks(){
      blocksList.innerHTML = '';
      blocksCount.textContent = blocks.length;
      if(blocks.length === 0){
        blocksList.innerHTML = '<div style="color:var(--muted);padding:8px;border-radius:8px;background:#fff;">No blocked dates</div>';
        return;
      }
      blocks.forEach((b, idx) => {
        const div = document.createElement('div');
        div.className = 'block-card';
        div.innerHTML = `
          <div>
            <small>Range</small>
            <div class="dates">
              <div class="pill-date">${b.start}</div>
              <div style="align-self:center;color:var(--muted)">to</div>
              <div class="pill-date">${b.end}</div>
            </div>
            <div class="cause">${escapeHTML(b.cause || 'â€”')}</div>
          </div>
        `;
        const trash = document.createElement('button');
        trash.className = 'trash-btn';
        trash.innerHTML = 'ðŸ—‘';
        trash.title = 'Delete range';
        trash.onclick = () => {
          if(confirm('Delete this blocked range?')) {
            blocks.splice(idx,1);
            saveBlocks(blocks);
            renderBlocks();
          }
        };
        div.appendChild(trash);
        blocksList.appendChild(div);
      });
    }

    function showFormError(msg){
      if(!msg){ formError.style.display='none'; formError.textContent=''; return; }
      formError.style.display='block';
      formError.textContent = msg;
    }

    function showCalendarError(msg){
      if(!msg){ calendarError.style.display='none'; calendarError.textContent=''; return; }
      calendarError.style.display='block';
      calendarError.textContent = msg;
    }

    function showSavedHint(){
      const saved = document.getElementById('savedHint');
      saved.style.display = 'inline-block';
      setTimeout(()=> saved.style.display='none', 1200);
    }

    // Basic overlap check (closed intervals)
    function rangesOverlap(aStart, aEnd, bStart, bEnd){
      return !(aEnd < bStart || bEnd < aStart);
    }

    // Validate new block
    function validateNewBlock(sIso, eIso){
      const s = parseDateISO(sIso);
      const e = parseDateISO(eIso);
      if(!sIso) return 'Start date is required.';
      if(!eIso) return 'End date is required.';
      if(!s || !e) return 'Invalid dates.';
      if(s.getTime() > e.getTime()) return 'Start date must be before or equal to end date.';
      // overlap with any existing block?
      for(const b of blocks){
        const bs = parseDateISO(b.start), be = parseDateISO(b.end);
        if(rangesOverlap(s.getTime(), e.getTime(), bs.getTime(), be.getTime())){
          return `This range overlaps with existing block ${b.start} â†’ ${b.end}.`;
        }
      }
      return null;
    }

    // Save new block
    id('saveBlock').addEventListener('click', function(){
      const sIso = id('start').value.trim();
      const eIso = id('end').value.trim();
      const cause = id('cause').value.trim();

      const v = validateNewBlock(sIso, eIso);
      if(v){
        showFormError(v);
        return;
      }
      showFormError(null);

      blocks.push({ start: sIso, end: eIso, cause });
      saveBlocks(blocks);
      renderBlocks();
      // clear inputs
      id('start').value = '';
      id('end').value = '';
      id('cause').value = '';
    });

    // Clear form
    id('clearForm').addEventListener('click', function(){
      id('start').value = '';
      id('end').value = '';
      id('cause').value = '';
      showFormError(null);
    });

    // Main date picker change should prevent blocked date selection
    mainDate.addEventListener('change', function(){
      const sel = mainDate.value;
      if(!sel){ showCalendarError(null); return; }
      const s = parseDateISO(sel);
      let blocked = null;
      for(const b of blocks){
        const bs = parseDateISO(b.start), be = parseDateISO(b.end);
        if(s.getTime() >= bs.getTime() && s.getTime() <= be.getTime()){
          blocked = b;
          break;
        }
      }
      if(blocked){
        showCalendarError(`Selected date is blocked (${blocked.start} â†’ ${blocked.end}).`);
        // optionally clear
        mainDate.value = '';
      } else {
        showCalendarError(null);
      }
    });

    // Toggle blocker visibility
    id('toggleBlocker').addEventListener('click', function(){
      const panel = document.querySelector('.blocker');
      if(panel.style.display === 'none'){ panel.style.display = ''; }
      else panel.style.display = 'none';
    });

    // Keyboard: quick submit on Enter inside cause input
    id('cause').addEventListener('keydown', function(e){
      if(e.key === 'Enter'){ e.preventDefault(); id('saveBlock').click(); }
    });

    // escaping HTML for display
    function escapeHTML(s){
      if(!s) return s;
      return s.replace(/[&<>"']/g, function(ch){
        return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[ch]);
      });
    }

    // boot
    renderBlocks();
    // show a filled saved hint briefly if there are blocks
    if(blocks.length) showSavedHint();

    // sanity: protect storage read/write errors
    window.addEventListener('error', (ev)=> {
      console.error('Unhandled error:', ev.error || ev.message);
    });
  </script>
</body>
</html>



<option value="213">+213 (Algeria)</option>
                            <option value="376">+376 (Andorra)</option>
                            <option value="244">+244 (Angola)</option>
                            <option value="1">+1 (Antigua and Barbuda)</option>
                            <option value="54">+54 (Argentina)</option>
                            <option value="374">+374 (Armenia)</option>
                            <option value="297">+297 (Aruba)</option>
                            <option value="61">+61 (Australia)</option>
                            <option value="43">+43 (Austria)</option>
                            <option value="994">+994 (Azerbaijan)</option>
                            <option value="1">+1 (Bahamas)</option>
                            <option value="973">+973 (Bahrain)</option>
                            <option value="880">+880 (Bangladesh)</option>
                            <option value="1">+1 (Barbados)</option>
                            <option value="375">+375 (Belarus)</option>
                            <option value="32">+32 (Belgium)</option>
                            <option value="501">+501 (Belize)</option>
                            <option value="229">+229 (Benin)</option>
                            <option value="975">+975 (Bhutan)</option>
                            <option value="591">+591 (Bolivia)</option>
                            <option value="387">+387 (Bosnia and Herzegovina)</option>
                            <option value="267">+267 (Botswana)</option>
                            <option value="55">+55 (Brazil)</option>
                            <option value="673">+673 (Brunei)</option>
                            <option value="359">+359 (Bulgaria)</option>
                            <option value="226">+226 (Burkina Faso)</option>
                            <option value="257">+257 (Burundi)</option>
                            <option value="855">+855 (Cambodia)</option>
                            <option value="237">+237 (Cameroon)</option>
                            <option value="1">+1 (Canada)</option>
                            <option value="238">+238 (Cape Verde)</option>
                            <option value="236">+236 (Central African Republic)</option>
                            <option value="235">+235 (Chad)</option>
                            <option value="56">+56 (Chile)</option>
                            <option value="86">+86 (China)</option>
                            <option value="57">+57 (Colombia)</option>
                            <option value="269">+269 (Comoros)</option>
                            <option value="242">+242 (Congo)</option>
                            <option value="682">+682 (Cook Islands)</option>
                            <option value="506">+506 (Costa Rica)</option>
                            <option value="385">+385 (Croatia)</option>
                            <option value="53">+53 (Cuba)</option>
                            <option value="357">+357 (Cyprus)</option>
                            <option value="420">+420 (Czech Republic)</option>
                            <option value="243">+243 (Democratic Republic of the Congo)</option>
                            <option value="45">+45 (Denmark)</option>
                            <option value="253">+253 (Djibouti)</option>
                            <option value="1">+1 (Dominica)</option>
                            <option value="1">+1 (Dominican Republic)</option>
                            <option value="593">+593 (Ecuador)</option>
                            <option value="20">+20 (Egypt)</option>
                            <option value="503">+503 (El Salvador)</option>
                            <option value="240">+240 (Equatorial Guinea)</option>
                            <option value="291">+291 (Eritrea)</option>
                            <option value="372">+372 (Estonia)</option>
                            <option value="251">+251 (Ethiopia)</option>
                            <option value="679">+679 (Fiji)</option>
                            <option value="358">+358 (Finland)</option>
                            <option value="33">+33 (France)</option>
                            <option value="241">+241 (Gabon)</option>
                            <option value="220">+220 (Gambia)</option>
                            <option value="995">+995 (Georgia)</option>
                            <option value="49">+49 (Germany)</option>
                            <option value="233">+233 (Ghana)</option>
                            <option value="30">+30 (Greece)</option>
                            <option value="1">+1 (Grenada)</option>
                            <option value="502">+502 (Guatemala)</option>
                            <option value="224">+224 (Guinea)</option>
                            <option value="245">+245 (Guinea-Bissau)</option>
                            <option value="592">+592 (Guyana)</option>
                            <option value="509">+509 (Haiti)</option>
                            <option value="504">+504 (Honduras)</option>
                            <option value="36">+36 (Hungary)</option>
                            <option value="354">+354 (Iceland)</option>
                            <option value="91">+91 (India)</option>
                            <option value="62">+62 (Indonesia)</option>
                            <option value="98">+98 (Iran)</option>
                            <option value="964">+964 (Iraq)</option>
                            <option value="353">+353 (Ireland)</option>
                            <option value="972">+972 (Israel)</option>
                            <option value="39">+39 (Italy)</option>
                            <option value="1">+1 (Jamaica)</option>
                            <option value="81">+81 (Japan)</option>
                            <option value="962">+962 (Jordan)</option>
                            <option value="7">+7 (Kazakhstan)</option>
                            <option value="254">+254 (Kenya)</option>
                            <option value="686">+686 (Kiribati)</option>
                            <option value="850">+850 (North Korea)</option>
                            <option value="82">+82 (South Korea)</option>
                            <option value="965">+965 (Kuwait)</option>
                            <option value="996">+996 (Kyrgyzstan)</option>
                            <option value="856">+856 (Laos)</option>
                            <option value="371">+371 (Latvia)</option>
                            <option value="961">+961 (Lebanon)</option>
                            <option value="266">+266 (Lesotho)</option>
                            <option value="231">+231 (Liberia)</option>
                            <option value="218">+218 (Libya)</option>
                            <option value="423">+423 (Liechtenstein)</option>
                            <option value="370">+370 (Lithuania)</option>
                            <option value="352">+352 (Luxembourg)</option>
                            <option value="853">+853 (Macau)</option>
                            <option value="389">+389 (North Macedonia)</option>
                            <option value="261">+261 (Madagascar)</option>
                            <option value="265">+265 (Malawi)</option>
                            <option value="60">+60 (Malaysia)</option>
                            <option value="960">+960 (Maldives)</option>
                            <option value="223">+223 (Mali)</option>
                            <option value="356">+356 (Malta)</option>
                            <option value="692">+692 (Marshall Islands)</option>
                            <option value="222">+222 (Mauritania)</option>
                            <option value="230">+230 (Mauritius)</option>
                            <option value="52">+52 (Mexico)</option>
                            <option value="691">+691 (Micronesia)</option>
                            <option value="373">+373 (Moldova)</option>
                            <option value="377">+377 (Monaco)</option>
                            <option value="976">+976 (Mongolia)</option>
                            <option value="382">+382 (Montenegro)</option>
                            <option value="212">+212 (Morocco)</option>
                            <option value="258">+258 (Mozambique)</option>
                            <option value="95">+95 (Myanmar)</option>
                            <option value="264">+264 (Namibia)</option>
                            <option value="674">+674 (Nauru)</option>
                            <option value="977">+977 (Nepal)</option>
                            <option value="31">+31 (Netherlands)</option>
                            <option value="64">+64 (New Zealand)</option>
                            <option value="505">+505 (Nicaragua)</option>
                            <option value="227">+227 (Niger)</option>
                            <option value="234">+234 (Nigeria)</option>
                            <option value="47">+47 (Norway)</option>
                            <option value="968">+968 (Oman)</option>
                            <option value="92">+92 (Pakistan)</option>
                            <option value="680">+680 (Palau)</option>
                            <option value="970">+970 (Palestine)</option>
                            <option value="507">+507 (Panama)</option>
                            <option value="675">+675 (Papua New Guinea)</option>
                            <option value="595">+595 (Paraguay)</option>
                            <option value="51">+51 (Peru)</option>
                            <option value="63">+63 (Philippines)</option>
                            <option value="48">+48 (Poland)</option>
                            <option value="351">+351 (Portugal)</option>
                            <option value="974">+974 (Qatar)</option>
                            <option value="40">+40 (Romania)</option>
                            <option value="7">+7 (Russia)</option>
                            <option value="250">+250 (Rwanda)</option>
                            <option value="685">+685 (Samoa)</option>
                            <option value="378">+378 (San Marino)</option>
                            <option value="239">+239 (Sao Tome and Principe)</option>
                            <option value="966">+966 (Saudi Arabia)</option>
                            <option value="221">+221 (Senegal)</option>
                            <option value="381">+381 (Serbia)</option>
                            <option value="248">+248 (Seychelles)</option>
                            <option value="232">+232 (Sierra Leone)</option>
                            <option value="65">+65 (Singapore)</option>
                            <option value="421">+421 (Slovakia)</option>
                            <option value="386">+386 (Slovenia)</option>
                            <option value="677">+677 (Solomon Islands)</option>
                            <option value="252">+252 (Somalia)</option>
                            <option value="27">+27 (South Africa)</option>
                            <option value="211">+211 (South Sudan)</option>
                            <option value="34">+34 (Spain)</option>
                            <option value="94">+94 (Sri Lanka)</option>
                            <option value="249">+249 (Sudan)</option>
                            <option value="597">+597 (Suriname)</option>
                            <option value="46">+46 (Sweden)</option>
                            <option value="41">+41 (Switzerland)</option>
                            <option value="963">+963 (Syria)</option>
                            <option value="886">+886 (Taiwan)</option>
                            <option value="992">+992 (Tajikistan)</option>
                            <option value="255">+255 (Tanzania)</option>
                            <option value="66">+66 (Thailand)</option>
                            <option value="228">+228 (Togo)</option>
                            <option value="676">+676 (Tonga)</option>
                            <option value="1">+1 (Trinidad and Tobago)</option>
                            <option value="216">+216 (Tunisia)</option>
                            <option value="90">+90 (Turkey)</option>
                            <option value="993">+993 (Turkmenistan)</option>
                            <option value="688">+688 (Tuvalu)</option>
                            <option value="256">+256 (Uganda)</option>
                            <option value="380">+380 (Ukraine)</option>
                            <option value="971">+971 (United Arab Emirates)</option>
                            <option value="44">+44 (United Kingdom)</option>
                            <option value="1">+1 (United States)</option>
                            <option value="598">+598 (Uruguay)</option>
                            <option value="998">+998 (Uzbekistan)</option>
                            <option value="678">+678 (Vanuatu)</option>
                            <option value="379">+379 (Vatican City)</option>
                            <option value="58">+58 (Venezuela)</option>
                            <option value="84">+84 (Vietnam)</option>
                            <option value="967">+967 (Yemen)</option>
                            <option value="260">+260 (Zambia)</option>
                            <option value="263">+263 (Zimbabwe)</option>